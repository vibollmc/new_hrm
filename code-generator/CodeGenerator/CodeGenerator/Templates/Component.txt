import { Component } from "@angular/core";
import { Router } from "@angular/router";

import { SelectionEvent } from "@progress/kendo-angular-grid";

import { ListModel } from "../../shared/list.model";
import { {0} } from "../../shared/datamodel/list/{1}";
import { BaseComponent } from "../../shared/base.component";

@Component({
  selector: "{1}",
  templateUrl: "./{1}.html"
})
export class {0}Component extends BaseComponent {
  titleAddOrEdit: string;
  classAddOrEdit: string;

  constructor(public vm: ListModel<{0}>,
    protected router: Router) {
    super(router, "{0}");
    this.vm.setCollection("{0}");
    this.vm.obj = new {0}();
    this.vm.objSelected = new {0}();
    this.vm.loadData();
  }

  gridSelectionChange(event: SelectionEvent) {
    if (event.selectedRows && event.selectedRows.length > 0)
      Object.assign(this.vm.objSelected, event.selectedRows[0].dataItem);
    else
      this.vm.objSelected = new {0}();
  }

  closeAddOrEdit() {
    this.vm.isAddingOrEditing = false;
  }

  openAddOrEdit(action: string) {
    if (action === "edit") {
      Object.assign(this.vm.obj, this.vm.objSelected);
      this.titleAddOrEdit = "Chỉnh sửa danh mục";
      this.classAddOrEdit = "k-icon k-i-edit";
    } else {
      this.vm.obj = new {0}();
      this.titleAddOrEdit = "Thêm danh mục";
      this.classAddOrEdit = "k-icon k-i-plus";
    }
    this.vm.isAddingOrEditing = true;
  }

  save() {
    this.vm.save();
    this.vm.objSelected = new {0}();
  }

  delete() {
    Object.assign(this.vm.obj, this.vm.objSelected);
    this.vm.delete();
    this.vm.objSelected = new {0}();
  }

  updateStatus({1}: {0}) {
    this.vm.updateStatus({1});
  }
}
